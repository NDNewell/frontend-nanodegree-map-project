function AppViewModel(){function a(a){this.breakName=a.breakName,this.location=a.location,this.bigWave=a.bigWave,this.worldFamous=a.worldFamous,this.cost=a.cost,this.skillLevel=a.skillLevel,this.waveType=a.waveType,this.breakType=a.breakType,this.waveSize=a.waveSize,this.bestSwell=a.bestSwell,this.bestWind=a.bestWind,this.bestTime=a.bestTime,this.climate=a.climate,this.attire=a.attire,this.hazards=a.hazards,this.lat=a.lat,this.lng=a.lng,this.spotID=a.spotID,this.picture=a.picture}this.self=this,self.LocationArray=[],locationData.forEach(function(b){self.LocationArray.push(new a(b))}),self.locationGrid=ko.observableArray(""),self.LocationArray.forEach(function(a){self.locationGrid.push(a)}),self.Query=ko.observable(""),self.searchLocations=function(){var a=self.Query().toLowerCase();self.locationGrid.removeAll(),self.LocationArray.forEach(function(b){b.breakName.toLowerCase().indexOf(a)>=0?self.locationGrid.push(b):b.location.toLowerCase().indexOf(a)>=0&&self.locationGrid.push(b)}),setMapBounds(),markers.forEach(function(b){b.title.toLowerCase().indexOf(a)>=0?b.setVisible(!0):b.setVisible(!1)})},self.clickLocationFrame=function(a){clickInProgress||(clickInProgress=!0,self.goToMarker(a.breakName),surfLocationGuide(a),getMagicSeaweed(a.spotID,a.breakName))},self.goToMarker=function(a){markers.forEach(function(b){b.title.indexOf(a)>=0&&(getInfoWindow(b,a),map.setCenter(b.getPosition()),map.setZoom(10),animateMarker(b))})},self.surfLocationGuide=function(a){$(".surf-guide").remove(),$(".surf-conditions-right").after('<div class="col-xs-12 surf-guide"></div>'),$(".surf-guide").append('<table class="surf-guide-table"></table>'),$surfGuideTable=$(".surf-guide-table"),$surfGuideTable.append('<thead class="table-head"></thead>'),$(".table-head").append('<tr><th colspan="4">'+a.breakName+", "+a.location+"</th></tr>"),$surfGuideTable.append('<tbody class="table-body"></tbody>');var b=$(".table-body");b.append('<tr><td colspan="2">'+a.bigWave+'</td><td colspan="2">'+a.worldFamous+"</td></tr>"),b.append("<tr><td>Cost/Day:</td><td>"+a.cost+"</td><td>Skill Level:</td><td>"+a.skillLevel+"</td></tr>"),b.append("<tr><td>Wave Type:</td><td>"+a.waveType+"</td><td>Break Type:</td><td>"+a.breakType+"</td></tr>"),b.append("<tr><td>Wave Size:</td><td>"+a.waveSize+"</td><td>Best Swell:</td><td>"+a.bestSwell+"</td></tr>"),b.append("<tr><td>Best Wind:</td><td>"+a.bestWind+"</td><td>Best Time:</td><td>"+a.bestTime+"</td></tr>"),b.append("<tr><td>Climate:</td><td>"+a.climate+"</td><td>Wear:</td><td>"+a.attire+"</td></tr>"),b.append('<tr><td>Hazards:</td><td colspan="3">'+a.hazards+"</td></tr>")}}function getMagicSeaweed(a,b){function c(){g.text(""),h.text(""),i.text("")}function d(){$(".map-container").css("margin-top","-178px"),$(".conditions-frame").css("margin-top","0px"),$("body").css("padding-top","309px"),$(".location-grid").css("margin-top","0px")}function e(){$(".location-grid").css("margin-top","41px"),f.append('<p class="conditions-error">'+b+" conditions unavailable =(</p>")}var f=$("div.conditions-frame"),g=$("div.surf-conditions-left"),h=$("div.surf-conditions-middle"),i=$("div.surf-conditions-right");c(),d(),$("p.conditions-error").remove();var j="http://magicseaweed.com/api/d2983e394d07724e96404fba11c10485/forecast/?spot_id="+a+"&units=us&fields=timestamp,fadedRating,solidRating,swell.minBreakingHeight,swell.maxBreakingHeight,swell.components.primary.*,wind.*,condition.*";if("none"===a)e(),clickInProgress=!1;else{var k=!1,l=setTimeout(function(){e(),clickInProgress=!1,k=!0},8e3);$.ajax({url:j,dataType:"jsonp",success:function(a){if(!k){for(var b=Date.now(),c=b/1e3,d=c-10800,e=c+10800,f=0;f<a.length;f++){var j=a[f].timestamp;if(c>j&&j>d)var m=a[f];else if(j>c&&e>j)var m=a[f]}var n=m.swell.minBreakingHeight,o=m.swell.maxBreakingHeight;if(n===o)var p=n;else var p=n+" - "+o;for(var q=m.swell.components.primary.height,r=m.swell.components.primary.period,s=(m.swell.components.primary.direction,m.swell.components.primary.compassDirection),t=m.wind.speed,u=(m.wind.direction,m.wind.compassDirection),v=m.condition.temperature,w=m.condition.weather,x="http://cdnimages.magicseaweed.com/30x30/"+w+".png",y="img/cloudy-&-wind.png",z=[],f=0;f<m.solidRating;f++)z.push('<img src="img/star_filled.png" />');for(var f=0;f<m.fadedRating;f++)z.push('<img src="img/star_empty.png" />');var A=z.join("");g.append("<p>"+v+" â„‰ </p>"),g.append('<img class="img-responsive" src="'+x+'" alt="Symbol for current weather">'),h.append("<p>"+q+"ft primary</p>"),h.append("<p>@ "+r+"s "+s+"</p>"),h.append("<p>"+p+"ft</p>"),h.append("<p>"+A+"</p>"),i.append("<p>"+t+"mph</p>"),i.append("<p>"+u+"</p>"),i.append('<img class="img-responsive" src="'+y+'" alt="Symbol for wind">'),$(".map-container").css("margin-top","-305px"),$(".conditions-frame").css("margin-top","-125px"),$("body").css("padding-top","436px"),clearTimeout(l),clickInProgress=!1}}})}$(".conditions-frame").on("click",function(a){c(),d(),$("p.conditions-error").remove()})}function initMap(){map=new google.maps.Map(document.getElementById("map"),{center:{lat:20.67,lng:-157.505},mapTypeId:google.maps.MapTypeId.TERRAIN}),infoWindow=new google.maps.InfoWindow,generateMarkers()}function generateMarkers(){for(var a=0;a<locationData.length;a++){var b={lat:locationData[a].lat,lng:locationData[a].lng},c=locationData[a].breakName,d=locationData[a].location;addMarker(c,b,d)}showMarkers(map),setMapBounds()}function addMarker(a,b,c){var d=new google.maps.Marker({position:b,animation:google.maps.Animation.DROP,map:map,title:a+" ("+c+")"});addListeners(d,a)}function addListeners(a,b){google.maps.event.addListener(a,"dblclick",function(a){return function(){map.setCenter(a.getPosition()),map.getZoom()<14&&map.setZoom(14)}}(a)),google.maps.event.addListener(a,"click",function(a,b){return function(){getInfoWindow(a,b),animateMarker(a)}}(a,b)),markers.push(a)}function showMarkers(a){for(var b=0;b<markers.length;b++)markers[b].setMap(a)}function setMapBounds(){for(var a=new google.maps.LatLngBounds,b=0;b<markers.length;b++)markers[b].visible&&a.extend(markers[b].getPosition());map.fitBounds(a),map.getZoom()>12&&map.setZoom(12)}function getInfoWindow(a,b){infoWindow.setContent(b),infoWindow.open(map,a)}function animateMarker(a){a.setAnimation(google.maps.Animation.BOUNCE),window.setTimeout(function(){a.setAnimation(null)},1400)}var locationData=[{breakName:"Sunset Beach",location:"Oahu, Hawaii",bigWave:!0,worldFamous:!1,cost:"$10",skillLevel:"Beginner",waveType:"left",breakType:"reef",waveSize:"10 - 12ft",bestSwell:"NE",bestWind:"ESE",bestTime:"March",climate:"hot and dry",attire:"boardshorts",hazards:"localism",lat:21.679011,lng:-158.041277,spotID:657,picture:'<img src="http://lorempixel.com/500/250/nature" class="location-image  img-responsive img-rounded">'},{breakName:"Pipeline/Backdoor",location:"Oahu, Hawaii",bigWave:!0,worldFamous:!1,cost:"$10",skillLevel:"Beginner",waveType:"left",breakType:"reef",waveSize:"10 - 12ft",bestSwell:"NE",bestWind:"ESE",bestTime:"March",climate:"hot and dry",attire:"boardshorts",hazards:"localism",lat:21.665244,lng:-158.053408,spotID:616,picture:'<img src="http://lorempixel.com/500/250/nature" class="location-image  img-responsive img-rounded">'},{breakName:"Cannons",location:"Kauai, Hawaii",bigWave:!0,worldFamous:!1,cost:"$10",skillLevel:"Beginner",waveType:"left",breakType:"reef",waveSize:"10 - 12ft",bestSwell:"NE",bestWind:"ESE",bestTime:"March",climate:"hot and dry",attire:"boardshorts",hazards:"localism",lat:22.224744,lng:-159.566712,spotID:"none",picture:'<img src="http://lorempixel.com/500/250/nature" class="location-image  img-responsive img-rounded">'},{breakName:"Tunnels",location:"Kauai, Hawaii",bigWave:!0,worldFamous:!1,cost:"$10",skillLevel:"Beginner",waveType:"left",breakType:"reef",waveSize:"10 - 12ft",bestSwell:"NE",bestWind:"ESE",bestTime:"March",climate:"hot and dry",attire:"boardshorts",hazards:"localism",lat:22.224744,lng:-159.566712,spotID:"none",picture:'<img src="http://lorempixel.com/500/250/nature" class="location-image  img-responsive img-rounded">'},{breakName:"Anahola",location:"Kauai, Hawaii",bigWave:!0,worldFamous:!1,cost:"$10",skillLevel:"Beginner",waveType:"left",breakType:"reef",waveSize:"10 - 12ft",bestSwell:"NE",bestWind:"ESE",bestTime:"March",climate:"hot and dry",attire:"boardshorts",hazards:"localism",lat:22.148311,lng:-159.300331,spotID:"none",picture:'<img src="http://lorempixel.com/500/250/nature" class="location-image  img-responsive img-rounded">'},{breakName:"Hanalei",location:"Kauai, Hawaii",bigWave:!0,worldFamous:!1,cost:"$10",skillLevel:"Beginner",waveType:"left",breakType:"reef",waveSize:"10 - 12ft",bestSwell:"NE",bestWind:"ESE",bestTime:"March",climate:"hot and dry",attire:"boardshorts",hazards:"localism",lat:22.218315,lng:-159.502265,spotID:3051,picture:'<img src="http://lorempixel.com/500/250/nature" class="location-image  img-responsive img-rounded">'},{breakName:"Hale'iwa",location:"Oahu, Hawaii",bigWave:!0,worldFamous:!1,cost:"$10",skillLevel:"Beginner",waveType:"left",breakType:"reef",waveSize:"10 - 12ft",bestSwell:"NE",bestWind:"ESE",bestTime:"March",climate:"hot and dry",attire:"boardshorts",hazards:"localism",lat:21.596416,lng:-158.109121,spotID:660,picture:'<img src="http://lorempixel.com/500/250/nature" class="location-image  img-responsive img-rounded">'},{breakName:"Waimea Bay",location:"Oahu, Hawaii",bigWave:!0,worldFamous:!1,cost:"$10",skillLevel:"Beginner",waveType:"left",breakType:"reef",waveSize:"10 - 12ft",bestSwell:"NE",bestWind:"ESE",bestTime:"March",climate:"hot and dry",attire:"boardshorts",hazards:"localism",lat:21.642987,lng:-158.066743,spotID:549,picture:'<img src="http://lorempixel.com/500/250/nature" class="location-image  img-responsive img-rounded">'},{breakName:"Rocky Point",location:"Oahu, Hawaii",bigWave:!0,worldFamous:!1,cost:"$10",skillLevel:"Beginner",waveType:"left",breakType:"reef",waveSize:"10 - 12ft",bestSwell:"NE",bestWind:"ESE",bestTime:"March",climate:"hot and dry",attire:"boardshorts",hazards:"localism",lat:21.670862,lng:-158.049157,spotID:658,picture:'<img src="http://lorempixel.com/500/250/nature" class="location-image  img-responsive img-rounded">'},{breakName:"Turtle Bay",location:"Oahu, Hawaii",bigWave:!0,worldFamous:!1,cost:"$10",skillLevel:"Beginner",waveType:"left",breakType:"reef",waveSize:"10 - 12ft",bestSwell:"NE",bestWind:"ESE",bestTime:"March",climate:"hot and dry",attire:"boardshorts",hazards:"localism",lat:21.708047,lng:-158.002275,spotID:"none",picture:'<img src="http://lorempixel.com/500/250/nature" class="location-image  img-responsive img-rounded">'},{breakName:"Halawa Bay",location:"Molokai, Hawaii",bigWave:!0,worldFamous:!1,cost:"$10",skillLevel:"Beginner",waveType:"left",breakType:"reef",waveSize:"10 - 12ft",bestSwell:"NE",bestWind:"ESE",bestTime:"March",climate:"hot and dry",attire:"boardshorts",hazards:"localism",lat:21.159132,lng:-156.735906,spotID:"none",picture:'<img src="http://lorempixel.com/500/250/nature" class="location-image  img-responsive img-rounded">'},{breakName:"Honolua Bay",location:"Maui, Hawaii",bigWave:!0,worldFamous:!1,cost:"$10",skillLevel:"Beginner",waveType:"left",breakType:"reef",waveSize:"10 - 12ft",bestSwell:"NE",bestWind:"ESE",bestTime:"March",climate:"hot and dry",attire:"boardshorts",hazards:"localism",lat:21.02435,lng:-156.64189,spotID:697,picture:'<img src="http://lorempixel.com/500/250/nature" class="location-image  img-responsive img-rounded">'},{breakName:"Jaws/Peahi",location:"Maui, Hawaii",bigWave:!0,worldFamous:!1,cost:"$10",skillLevel:"Beginner",waveType:"left",breakType:"reef",waveSize:"10 - 12ft",bestSwell:"NE",bestWind:"ESE",bestTime:"March",climate:"hot and dry",attire:"boardshorts",hazards:"localism",lat:20.946401,lng:-156.297389,spotID:617,picture:'<img src="http://lorempixel.com/500/250/nature" class="location-image  img-responsive img-rounded">'},{breakName:"The Cove",location:"Maui, Hawaii",bigWave:!0,worldFamous:!1,cost:"$10",skillLevel:"Beginner",waveType:"left",breakType:"reef",waveSize:"10 - 12ft",bestSwell:"NE",bestWind:"ESE",bestTime:"March",climate:"hot and dry",attire:"boardshorts",hazards:"localism",lat:20.728298,lng:-156.452353,spotID:"none",picture:'<img src="http://lorempixel.com/500/250/nature" class="location-image  img-responsive img-rounded">'},{breakName:"Ma'alaea",location:"Maui, Hawaii",bigWave:!0,worldFamous:!1,cost:"$10",skillLevel:"Beginner",waveType:"left",breakType:"reef",waveSize:"10 - 12ft",bestSwell:"NE",bestWind:"ESE",bestTime:"March",climate:"hot and dry",attire:"boardshorts",hazards:"localism",lat:20.79186,lng:-156.50896,spotID:618,picture:'<img src="http://lorempixel.com/500/250/nature" class="location-image  img-responsive img-rounded">'},{breakName:"Lahaina",location:"Maui, Hawaii",bigWave:!0,worldFamous:!1,cost:"$10",skillLevel:"Beginner",waveType:"left",breakType:"reef",waveSize:"10 - 12ft",bestSwell:"NE",bestWind:"ESE",bestTime:"March",climate:"hot and dry",attire:"boardshorts",hazards:"localism",lat:20.869326,lng:-156.679025,spotID:4287,picture:'<img src="http://lorempixel.com/500/250/nature" class="location-image  img-responsive img-rounded">'},{breakName:"Lymans/Banyans",location:"Big Island, Hawaii",bigWave:!0,worldFamous:!1,cost:"$10",skillLevel:"Beginner",waveType:"left",breakType:"reef",waveSize:"10 - 12ft",bestSwell:"NE",bestWind:"ESE",bestTime:"March",climate:"hot and dry",attire:"boardshorts",hazards:"localism",lat:19.606206,lng:-155.978016,spotID:2784,picture:'<img src="http://lorempixel.com/500/250/nature" class="location-image  img-responsive img-rounded">'},{breakName:"Pine Trees",location:"Big Island, Hawaii",bigWave:!0,worldFamous:!1,cost:"$10",skillLevel:"Beginner",waveType:"left",breakType:"reef",waveSize:"10 - 12ft",bestSwell:"NE",bestWind:"ESE",bestTime:"March",climate:"hot and dry",attire:"boardshorts",hazards:"localism",lat:19.695131,lng:-156.045926,spotID:3958,picture:'<img src="http://lorempixel.com/500/250/nature" class="location-image  img-responsive img-rounded">'},{breakName:"Kiholo Bay",location:"Big Island, Hawaii",bigWave:!0,worldFamous:!1,cost:"$10",skillLevel:"Beginner",waveType:"left",breakType:"reef",waveSize:"10 - 12ft",bestSwell:"NE",bestWind:"ESE",bestTime:"March",climate:"hot and dry",attire:"boardshorts",hazards:"localism",lat:19.854416,lng:-155.93134,spotID:"none",picture:'<img src="http://lorempixel.com/500/250/nature" class="location-image  img-responsive img-rounded">'},{breakName:"Honoli'i",location:"Big Island, Hawaii",bigWave:!0,worldFamous:!1,cost:"$10",skillLevel:"Beginner",waveType:"left",breakType:"reef",waveSize:"10 - 12ft",bestSwell:"NE",bestWind:"ESE",bestTime:"March",climate:"hot and dry",attire:"boardshorts",hazards:"localism",lat:19.756298,lng:-155.08996,spotID:3815,picture:'<img src="http://lorempixel.com/500/250/nature" class="location-image  img-responsive img-rounded">'}],clickInProgress=!1,map,infoWindow,markers=[];ko.applyBindings(new AppViewModel);